Все опписано в коде. Единственное, что хочу предупредить, что конченый автомат можно строить легче. Поэтому эту лабу могут заполить, лучше либо найти уже готовый такой автомат, либо объяснить очень хорошо, как он работает. Впринципе, там очень много теории по самому автомату, лучше будет прочитать самому, если что вот ссылка:http://e-maxx.ru/algo/suffix_automata